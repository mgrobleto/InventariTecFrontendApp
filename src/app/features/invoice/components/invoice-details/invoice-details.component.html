<mat-dialog-content id="reportData" class="invoice-modal">
  <div class="invoice-header">
    <div class="brand">
      <img class="brand-logo" [src]="logoUrl" alt="Tecnorefili" />
      <div class="brand-text">
        <span class="brand-name">TECNOREFILL</span>
        <span class="brand-url">Polaris.com</span>
        <div class="company-contact print-company-contact">
          <span>Tel. 88975535 · Tigo 86087337 · Claro</span>
          <span>Colonia Linda Vista 2 1/2 c. al sur, 35 Avenida</span>
        </div>
      </div>
    </div>

    <div class="invoice-meta">
      <span class="invoice-title">Detalle de Factura</span>
      <span class="invoice-id">Factura # {{data?.invoice_number}}</span>
      <span class="invoice-date">Emitida: {{ data?.invoice_date | date:'dd/MM/yy HH:mm' }}</span>
    </div>

    <button class="close-button" mat-icon-button mat-dialog-close aria-label="Cerrar">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="invoice-grid">
    <div class="info-card">
      <h3>Cliente</h3>
      <div class="info-row">
        <span class="info-label">Nombre</span>
        <span class="info-value">{{data?.customer.first_name + ' ' + data?.customer.last_name}}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Teléfono</span>
        <span class="info-value">{{data?.customer.phone}}</span>
      </div>
    </div>

    <div class="info-card">
      <h3>Detalle</h3>
      <div class="info-row">
        <span class="info-label">ID</span>
        <span class="info-value"># {{data?.invoice_number}}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Pago</span>
        <span class="info-value">{{data?.payment_type.payment_type_name}}</span>
      </div>
    </div>
  </div>

  <div class="section-title">Productos comprados</div>
  <div class="invoice-table">
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="Producto">
        <th mat-header-cell *matHeaderCellDef>Producto</th>
        <td mat-cell *matCellDef="let element"> {{element.product_name}} </td>
      </ng-container>

      <ng-container matColumnDef="Precio">
        <th mat-header-cell *matHeaderCellDef>Precio por unidad</th>
        <td mat-cell *matCellDef="let element"> {{element.cost_price_at_time}} </td>
      </ng-container>

      <ng-container matColumnDef="Cantidad">
        <th mat-header-cell *matHeaderCellDef>Cantidad</th>
        <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
      </ng-container>

      <ng-container matColumnDef="Total">
        <th mat-header-cell *matHeaderCellDef>Total</th>
        <td mat-cell *matCellDef="let element"> {{element.sale_price_at_time}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="products-list" *ngIf="dataSource.data.length">
    <div class="product-pill" *ngFor="let item of dataSource.data">
      <div class="product-info">
        <span class="product-name">{{item.product_name}}</span>
        <span class="product-meta">{{item.quantity}} x {{item.cost_price_at_time}}</span>
      </div>
      <span class="product-total">{{item.sale_price_at_time}}</span>
    </div>
  </div>
  <div class="empty-products" *ngIf="!dataSource.data.length">
    No hay productos registrados en esta factura.
  </div>

  <div class="invoice-summary">
    <div class="summary-row">
      <span>SubTotal</span>
      <span>{{data?.sub_total}}</span>
    </div>
    <div class="summary-row">
      <span>IVA</span>
      <span>{{data?.iva}}</span>
    </div>
    <div class="summary-total">
      <span>Total</span>
      <span>{{data?.total}}</span>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="invoice-actions">
  <!-- <button 
    type="button" 
    class="btn btn-primary download" 
    matTooltip="Descargar"  
    >
    <i class="far fa-file-spreadsheet"></i>
    Decargar Excel
  </button> -->
  <button printTitle="Detalle Factura" [useExistingCss]="true"  printSectionId="reportData" ngxPrint class="btn btn-light text-capitalize border-0" data-mdb-ripple-color="dark"><i
    class="fas fa-print text-primary"></i> Exportar / Imprimir </button>

  <!-- <button class="btn btn-light text-capitalize" (click)="generateReportPDF()" data-mdb-ripple-color="dark"><i
  class="far fa-file-pdf text-danger"></i> Exportar PDF </button> -->
    
  <button class="btn btn-danger" type="button" mat-dialog-close>
      Cerrar
  </button>
</mat-dialog-actions>



